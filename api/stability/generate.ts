<conteúdo corrigido do generate.ts fornecido acima>