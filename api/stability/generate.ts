<conteúdo corrigido do generate.ts em ESM compatível>